<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="ElliottX4"><meta name="keywords" content="java"><meta name="description" content="互联网 技术 博客"><link rel="alternative" href="/atom.xml" title="NEVER NEVER NEVER" type="application/atom+xml"><link rel="icon" href="/alipay.png"><title>Db-Mq-Introduce - NEVER NEVER NEVER</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">NEVER NEVER NEVER</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time class="post__time" datetime="2019-04-19T03:43:37.000Z">2019 - 04 - 19</time><h1 class="post__title"><a href="/2019/04/19/db-mq-introduce/">Db-Mq-Introduce</a></h1><div class="post__main echo"><h1 id="一、简述"><a href="#一、简述" class="headerlink" title="一、简述"></a>一、简述</h1><ol>
<li>消息队列已经逐渐成为企业IT系统内部通信的核心手段。它具有低耦合、可靠投递、广播、流量控制、最终一致性等一系列功能，成为异步RPC的主要手段之一。当今市面上有很多主流的消息中间件，如老牌的ActiveMQ、RabbitMQ，炙手可热的Kafka，阿里巴巴自主开发RocketMQ等。<h1 id="二、topic和queue"><a href="#二、topic和queue" class="headerlink" title="二、topic和queue"></a>二、topic和queue</h1></li>
<li>topic用于Pub/Sub发布订阅（广播)，任意一个监听队列的消费者都会收到队列中的每一条消息，生产者只塞一条消息。是一对多的对应关系</li>
<li>queue用于点对点的方式，一个queue可以有多个监听者，但是每个消息只会被消费一次。是一对一的对应关系。<h1 id="三、优势"><a href="#三、优势" class="headerlink" title="三、优势"></a>三、优势</h1></li>
<li>系统解耦，系统与系统之间没有直接的调用关系。</li>
<li>调用是异步，可以提高响应时间，为数据处理提高性能支持。<h1 id="四、应用场景"><a href="#四、应用场景" class="headerlink" title="四、应用场景"></a>四、应用场景</h1></li>
<li>异步</li>
<li>解耦</li>
<li>冗余：有些情况下，处理数据的过程会失败。除非数据被持久化，否则将造成丢失。消息队列把数据进行持久化直到它们已经被完全处理，通过这一方式规避了数据丢失风险。许多消息队列所采用的”插入-获取-删除”范式中，在把一个消息从队列中删除之前，需要你的处理系统明确的指出该消息已经被处理完毕，从而确保你的数据被安全的保存直到你使用完毕</li>
<li>扩展性：分布式扩容，提高吞吐量</li>
<li>过载保护：当数据量剧增的时候，应用程序来不及处理，可以暂时缓存在mq中，等应用程序慢慢处理。</li>
<li>可恢复性：消息队列降低了进程间的耦合度，所以即使一个处理消息的进程挂掉，加入队列中的消息仍然可以在系统恢复后被处理。</li>
<li>顺序保证：在大多使用场景下，数据处理的顺序都很重要。大部分消息队列本来就是排序的，并且能保证数据会按照特定的顺序来处理。</li>
<li>缓冲：在任何重要的系统中，都会有需要不同的处理时间的元素。消息队列通过一个缓冲层来帮助任务最高效率的执行，该缓冲有助于控制和优化数据流经过系统的速度。以调节系统响应时间。</li>
<li>数据流处理：分布式系统产生的海量数据流，如：业务日志、监控数据、用户行为等，针对这些数据流进行实时或批量采集汇总，然后进行大数据分析是当前互联网的必备技术，通过消息队列完成此类数据收集是最好的选择。<h1 id="五、常用协议"><a href="#五、常用协议" class="headerlink" title="五、常用协议"></a>五、常用协议</h1></li>
<li>AMQP协议：<br><br>AMQP即Advanced Message Queuing Protocol,一个提供统一消息服务的应用层标准高级消息队列协议,是应用层协议的一个开放标准,为面向消息的中间件设计。基于此协议的客户端与消息中间件可传递消息，并不受客户端/中间件不同产品，不同开发语言等条件的限制。</li>
<li>MQTT协议：<br><br>MQTT（Message Queuing Telemetry Transport，消息队列遥测传输）是IBM开发的一个即时通讯协议，有可能成为物联网的重要组成部分。该协议支持所有平台，几乎可以把所有联网物品和外部连接起来，被用来当做传感器和致动器（比如通过Twitter让房屋联网）的通信协议。 </li>
<li>STOMP协议:<br><br>STOMP（Streaming Text Orientated Message Protocol）是流文本定向消息协议，是一种为MOM(Message Oriented Middleware，面向消息的中间件)设计的简单文本协议。STOMP提供一个可互操作的连接格式，允许客户端与任意STOMP消息代理（Broker）进行交互。命令模式（非topic\queue模式）</li>
<li>XMPP协议:<br><br>(可扩展消息处理现场协议，Extensible Messaging and Presence Protoco)核心是基于XML流传输</li>
<li>自定义:<br><br>有些特殊框架（如：redis、kafka、zeroMq等）根据自身需要未严格遵循MQ规范，而是基于TCP\IP自行封装了一套协议，通过网络socket接口进行传输，实现了MQ的功能。<h1 id="六、五种中间件的对比"><a href="#六、五种中间件的对比" class="headerlink" title="六、五种中间件的对比"></a>六、五种中间件的对比</h1>||rocketMq|rabbitMq|activeMq|zeroMq|kafka|<br>|:—-|:—-:|:—-:|:—-:|:—-:|:—-:|<br>|支持语言|只有java|语言无关|语言无关|语言无关|语言无关<br>|消息丢失|理论no|低|低|会|理论no|<br>|延时|毫秒|微妙|微妙|极低，号称最快|微妙|<br>|持久化|磁盘文件|内存，文件|内存，文件，db|no|文件|<br>|负载均衡|yes|yes|yes|yes|依赖zookeeper|<br>|使用场景|企业级，大数据量|企业级|小型系统，数据量不大|多用于金融，支持复杂队列|实时处理，日志收集|</li>
</ol>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/work/">work</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/mq/">mq</a></li></ul></footer></article></main><footer class="foot"><div class="foot-copy">&copy; 2018 - 2019 ElliottX4</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>